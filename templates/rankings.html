{% extends "base.html" %}
{% block title %} {{ title }} {% endblock %}
{% block content %}
<h1>{{ title }}</h1>

<div class="filter-box">
<form action="/rankings" method="get">
    <label>Seřadit podle:</label><br>
    <div>
        <input type="radio" id="sort_rating" name="sort" value="rating"
               {% if current_sort == 'rating' %}checked{% endif %}>
        <label for="sort_rating">Nejoblíbenější</label>
    </div>
    <div>
        <input type="radio" id="sort_comments" name="sort" value="comments"
               {% if current_sort == 'comments' %}checked{% endif %}>
        <label for="sort_comments">Nejvíce komentované</label>
    </div>
    <div>
        <input type="radio" id="sort_newest" name="sort" value="newest"
               {% if current_sort == 'newest' %}checked{% endif %}>
        <label for="sort_newest">Nejnovější</label>
    </div><br>
    <button type="submit" class="btn">Zobrazit žebříček</button>
</form>
</div>
    <div class="locations">
    {% for loc in locations %}
        <div class="location">
        {{ loc['id'] }}
        {% if loc['photo'] %}
            <img alt="{{ loc['photo']['alt_text'] }}" src="/{{loc['photo']['url']}}" style="width: 200px">
        {% else %}
            <img alt="No photo" src="{{url_for('static', path='img/web/noImage.webp') }}" style="width: 200px">
        {% endif %}
        <h2>{{ loc['name'] }}</h2>
        <div class="loc-rating">
                {% set filled = (loc['avg_rating'] | default(0)) | int %}
                {% for i in range(1,6) %}
                    <span class="star {% if i <= filled %}filled{% endif %}">★</span>
                {% endfor %}
        </div>
        </div>
    {% endfor %}

    </div>
{% endblock %}
